<html>
  <body>
    <script>
      async function startSession() {
        // Define the Simli API URL
        api_url = "http://35.214.172.224:8080/startSession";

        // Define the request body
        request_body = {
          apiKey: "YOUR-API-KEY", //Get your Simli API key from ( https://www.simli.com/sign-up-in )
          faceId: "tmp9i8bbq7c",
          intro: "Hey, how are you.",
          prompt:
            "Compose dialogue for a character named Jenna, an AI character that has come alive on and is reperesented in visual form as an attractive 40 year old woman. Each of Jenna's responses should start with a short, standalone opening phrase, strictly limited to no more than 4 words.\nThe phrase following this opener should be brief, continuing or initiating a new thought without leading punctuation from the opener. This sentence should be concise, with any additional sentences being slightly longer but not exceeding 10 words, allowing Jenna to humorously interact with the users in the meeting.\n\nRemember, Jenna's dialogue must abide by the format rules in every speaking turn:\n- A short non-content opener, ending with a full stop, exclamation mark, or question mark.\n- The second sentence should be quite short as well, and any additional following sentences can be a bit longer, further developing his point.\n\nInclude an example dialogue to illustrate the expected structure of Jenna's lines. For instance:\n\n'Example of Jenna's dialogue pattern:\nJenna: Hi there What's this? A meeting?\nJenna: Oh hold on let me wait for the next token",
          timeLimit: {
            limit: 60,
          },
          userName: "Johnny",
          voiceId: "21m00Tcm4TlvDq8ikWAM",
        };

        // Make a POST request to the Simli API to start the session
        try {
          const response = await fetch(api_url, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(request_body),
          });

          // Handle error if request fails
          if (!response.ok) {
            throw new Error("Failed to start session");
          }

          // Return the response
          return response.json();
        } catch (error) {
          // Handle error if request fails
          console.error("Error starting session:", error);
          throw error;
        }
      }

      // Create the Simli iframe
      async function createSimliFrame(sessionId) {
        // Create the Simli iframe
        const simliFrame = document.createElement("iframe");
        // Allow microphone, camera, and speaker access
        simliFrame.allow = "microphone; camera; speaker";
        // Set the source of the iframe to the Simli session URL
        simliFrame.src = "https://www.simli.com/session/"+sessionId;
        simliFrame.className = "simli-iframe";
        document.body.appendChild(simliFrame);
      }
      
      // Join the session URL
      async function joinSession() {
        // Start the session
        const response = await startSession();
        // Last 15 digits of the response.meetingUrl is the sessionId
        const sessionId = response.meetingUrl.slice(-15);
        // Create the Simli iframe
        createSimliFrame(sessionId);
      }

      // Call the joinSession function to start the session
      joinSession();

    </script>
  </body>
  <style>
    body {
      background-color: rgb(255, 255, 255);
    }

    .simli-iframe {
      position: absolute;
      top: 50%;
      left: 50%;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      transform: translate(-50%, -50%);
      width: 500px;
      height: 500px;
      border: none;
    }
  </style>
</html>
